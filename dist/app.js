"use strict";function config(e,t,n){e.html5Mode(!0),t.registerUrl({"default":n,spices:n+"/spices",tags:n+"/tags"})}function AppController(e,t,n,o){var i=this;e.auth=n,e.activeRoute="MyFeed",i.openAddSpice=function(){o.setObj(null),e.activeRoute="AddSpice",t.navigate(["AddSpice"])}}function AddSpiceController(e,t,n){function o(){if(i.spice&&i.spice.tags){var e=i.spice.tags.split(",");return e=e.map(function(e){return{text:e}})}return null}var i=this,r=t.getTagList();i.spice=t.getObj(),i.tags=o(),i.isUpdate=i.spice,i.add=function(){angular.isArray(i.tags)&&(i.spice.tags=i.tags.map(function(e){return e.text}).join(",")),i.isUpdate?t.update(i.spice):t.add(i.spice),i.spice={},i.tags=null,i.spiceForm.$setPristine(),i.showStatus=!0},i.$routerCanReuse=function(){return!1},i.getTagList=function(e){return angular.isArray(r)?r.filter(function(t){return 0===t.text.toLowerCase().indexOf(e.toLowerCase())}):null},i.ok=function(){i.showStatus=!1,i.isUpdate=!1}}function LoginButtonController(e){var t=this;t.isLoggedIn=function(){return e.isLoggedIn()},t.login=function(){e.login().then(function(e){t.authData=e,console.log(t.authData)})},t.logout=function(){e.logout()}}function MyFeedController(e,t,n,o){var i=this,r=null;i.filter=function(e){var t=!0;if(r&&(t=e.user&&e.user.uid===r||e.pinnedUsers&&e.pinnedUsers[r]===!0),n.search){var o=n.search.toLowerCase();t=e.name.toLowerCase().indexOf(o)>=0||e.user.name.toLowerCase().indexOf(o)>=0,!t&&e.description&&(t=e.description.toLowerCase().indexOf(o)>=0),!t&&e.ingredients&&(t=e.ingredients.toLowerCase().indexOf(o)>=0),!t&&e.directions&&(t=e.directions.toLowerCase().indexOf(o)>=0),!t&&e.tags&&(t=e.tags.toLowerCase().indexOf(o)>=0)}return t},i.$routerOnActivate=function(t){if(console.log("route state: "+t.params.state),t.params.state&&o.isLoggedIn()){var a=o.getUser();r=a.uid,n.activeRoute="MySpice"}else r=null,n.activeRoute="MyFeed";i.spices=e.getAll()}}function SpiceCardController(e,t,n,o){var i=this;o.getUser();i.togglePin=function(t){e.togglePin(t)},i.edit=function(o){e.setObj(o),n.activeRoute="AddSpice",t.navigate(["AddSpice"])},i["delete"]=function(t){e.remove(t)}}function authService(e,t,n){function o(){return null!==l}function i(){return null!==l?{uid:l.uid,name:l.google.displayName,profileImageURL:l.google.profileImageURL,provider:l.provider}:null}function r(){return u.$authWithOAuthPopup("google",{}).then(function(e){return l=e},function(e){n.reject(e)})}function a(){ref.unauth(),l=null}var l=null,u=e(t["default"]),c={isLoggedIn:o,getUser:i,login:r,logout:a};return c}function spiceApi(e,t,n){function o(){return d}function i(){return s}function r(e){s=e}function a(e){var t=g.getAll();return e.timestamp=Firebase.ServerValue.TIMESTAMP,e.user=n.getUser(),console.log(e),t.$add(e)}function l(e){var t=g.getAll();e.timestamp=Firebase.ServerValue.TIMESTAMP,console.log(e),t.$save(e)}function u(e){var t=g.getAll();console.log(e),t.$remove(e)}function c(e){var t=n.getUser();e.user.uid!==t.uid&&(e.pinnedUsers||(e.pinnedUsers={}),e.pinnedUsers[t.uid]=!(e.pinnedUsers[t.uid]===!0),g.update(e))}function p(){return[{text:"appetizer"},{text:"dessert"}]}var s=null,d=(new Date,e(t.spices)),g={getAll:o,getObj:i,setObj:r,add:a,update:l,remove:u,togglePin:c,getTagList:p};return g}angular.module("allSpiceApp",["ngComponentRouter","firebase","ngTagsInput"]).constant("FirebaseUrl","https://amber-heat-8766.firebaseio.com").config(config).value("$routerRootComponent","app"),config.$inject=["$locationProvider","$firebaseRefProvider","FirebaseUrl"],angular.module("allSpiceApp").component("app",{templateUrl:"app/app.html",controller:AppController,$routeConfig:[{path:"/myFeed",name:"MyFeed",component:"myFeed",useAsDefault:!0},{path:"/addSpice",name:"AddSpice",component:"addSpice"}]}),AppController.$inject=["$rootScope","$rootRouter","authService","spiceApi"],angular.module("allSpiceApp").component("addSpice",{controller:AddSpiceController,templateUrl:"app/addspice/addspice.html"}),AddSpiceController.$inject=["$firebaseArray","spiceApi","$timeout"],angular.module("allSpiceApp").component("saLoginButton",{controller:LoginButtonController,templateUrl:"app/components/loginbutton.html"}),LoginButtonController.$inject=["authService"],angular.module("allSpiceApp").component("myFeed",{controller:MyFeedController,templateUrl:"app/myfeed/myfeed.html"}),MyFeedController.$inject=["spiceApi","$rootRouter","$rootScope","authService"],angular.module("allSpiceApp").component("saSpiceCard",{bindings:{spice:"<"},controller:SpiceCardController,templateUrl:"app/myfeed/spice.html"}),SpiceCardController.$inject=["spiceApi","$rootRouter","$rootScope","authService"],angular.module("allSpiceApp").factory("authService",authService),authService.$inject=["$firebaseAuth","$firebaseRef","$q"],angular.module("allSpiceApp").factory("spiceApi",spiceApi),spiceApi.$inject=["$firebaseArray","$firebaseRef","authService"];
angular.module("allSpiceApp").run(["$templateCache", function($templateCache) {$templateCache.put("app/app.html","<nav class=\"navbar navbar-default navbar-inverse navbar-fixed-top\"><div class=\"container-fluid\"><!-- Brand and toggle get grouped for better mobile display --><div class=\"navbar-header\"><button type=\"button\" class=\"navbar-toggle collapsed\" data-toggle=\"collapse\" data-target=\"#navbar-collapse\" aria-expanded=\"false\"><span class=\"sr-only\">Toggle navigation</span> <span class=\"icon-bar\"></span> <span class=\"icon-bar\"></span> <span class=\"icon-bar\"></span></button> <a class=\"navbar-brand\" ng-link=\"[\'MyFeed\']\"><span style=\"color:#89E894\" class=\"glyphicon glyphicon-grain\" aria-hidden=\"true\"></span> All Spice</a></div><div class=\"collapse navbar-collapse\" id=\"navbar-collapse\"><ul class=\"nav navbar-nav\"><li ng-class=\"{\'active\' : $root.activeRoute === \'MyFeed\'}\"><a ng-link=\"[\'MyFeed\']\">My Feed <span class=\"sr-only\">(current)</span></a></li><li ng-show=\"$root.auth.isLoggedIn()\" ng-class=\"{\'active\' : $root.activeRoute === \'MySpice\'}\"><a ng-link=\"[\'MyFeed\', {state: \'mySpice\'}]\">My Spice</a></li></ul><sa-login-button></sa-login-button><ul ng-show=\"$root.auth.isLoggedIn()\" class=\"nav navbar-nav navbar-right\" style=\"margin-right:0px\"><li ng-class=\"{\'active\' : $root.activeRoute === \'AddSpice\'}\"><a href=\"#\" ng-click=\"$ctrl.openAddSpice()\"><span style=\"color:#89E894\" class=\"glyphicon glyphicon-plus\" aria-hidden=\"true\"></span> Add Spice</a></li></ul><form class=\"navbar-form navbar-right hidden-xs\" role=\"search\"><div class=\"form-group\"><div class=\"input-group\"><div class=\"input-group-addon\"><span style=\"color:#89E894\" class=\"glyphicon glyphicon-search\" aria-hidden=\"true\"></span></div><input ng-model=\"$root.search\" ng-model-options=\"{ debounce: 250 }\" type=\"text\" class=\"form-control search-input\" placeholder=\"Search\" style=\"width:155px\"></div></div></form></div></div></nav><ng-outlet></ng-outlet>");
$templateCache.put("app/addspice/addspice.html","<form novalidate name=\"$ctrl.spiceForm\"><div class=\"container-fluid\" style=\"max-width:1000px;background:#eee\"><!-- Header --><div class=\"row\" style=\"background: #444;padding-left: 10px\"><h2 style=\"color: #89E894\"><span class=\"glyphicon glyphicon-chevron-right\" aria-hidden=\"true\" style=\"top: 2px\"></span> {{ ($ctrl.isUpdate) ? \'Edit Spice\' : \'Add Spice\' }}</h2></div><!-- Entry View --><div class=\"row\" ng-show=\"$ctrl.showStatus !== true\"><div class=\"col-sm-6\" style=\"padding-top: 15px\"><div class=\"form-group\" ng-class=\"{ \'has-error\': $ctrl.spiceForm.inputName.$invalid && !$ctrl.spiceForm.inputName.$pristine }\"><label for=\"inputName\">Name</label><input type=\"text\" ng-model=\"$ctrl.spice.name\" class=\"form-control\" id=\"inputName\" name=\"inputName\" placeholder=\"Name\" required><div ng-show=\"$ctrl.spiceForm.inputName.$invalid && !$ctrl.spiceForm.inputName.$pristine\" ng-messages=\"$ctrl.spiceForm.inputName.$error\" class=\"help-block\" role=\"alert\"><div ng-message=\"required\">This field is required</div></div></div><div class=\"form-group\"><label for=\"inputDescription\">Description</label><textarea ng-model=\"$ctrl.spice.description\" class=\"form-control\" id=\"inputDescription\"></textarea></div><div class=\"form-group\"><label for=\"inputImageURL\">Image URL</label><input type=\"text\" ng-model=\"$ctrl.spice.imageURL\" class=\"form-control\" id=\"inputImageURL\" placeholder=\"Image URL\"></div><img ng-show=\"$ctrl.spice.imageURL\" ng-src=\"{{$ctrl.spice.imageURL}}\" style=\"width:100%;margin-bottom: 15px\"></div><div class=\"col-sm-6\" style=\"background: #ddd;padding-top: 15px\"><div class=\"row\"><div class=\"col-sm-4\"><div class=\"form-group\" ng-class=\"{ \'has-error\': $ctrl.spiceForm.inputPrepTime.$invalid && !$ctrl.spiceForm.inputPrepTime.$pristine }\"><label><span class=\"glyphicon glyphicon-time\" aria-hidden=\"true\" style=\"top: 2px\"></span> Prep (min)</label><input name=\"inputPrepTime\" ng-model=\"$ctrl.spice.prepTime\" class=\"form-control\" type=\"number\" min=\"1\" max=\"999\" ng-maxlength=\"3\"><div ng-show=\"$ctrl.spiceForm.inputPrepTime.$invalid && !$ctrl.spiceForm.inputPrepTime.$pristine\" ng-messages=\"$ctrl.spiceForm.inputPrepTime.$error\" class=\"help-block\" role=\"alert\"><div ng-message=\"required\">Please enter 1-999</div></div></div></div><div class=\"col-sm-4\"><div class=\"form-group\" ng-class=\"{ \'has-error\': $ctrl.spiceForm.inputCookTime.$invalid && !$ctrl.spiceForm.inputCookTime.$pristine }\"><label><span class=\"glyphicon glyphicon-time\" aria-hidden=\"true\" style=\"top: 2px\"></span> Cook (min)</label><input name=\"inputCookTime\" ng-model=\"$ctrl.spice.cookTime\" class=\"form-control\" type=\"number\" min=\"1\" max=\"999\" ng-maxlength=\"3\"><div ng-show=\"$ctrl.spiceForm.inputCookTime.$invalid && !$ctrl.spiceForm.inputCookTime.$pristine\" ng-messages=\"$ctrl.spiceForm.inputCookTime.$error\" class=\"help-block\" role=\"alert\"><div ng-message=\"required\">Please enter 1-999</div></div></div></div><div class=\"col-sm-4\"><div class=\"form-group\" ng-class=\"{ \'has-error\': $ctrl.spiceForm.inputServings.$invalid && !$ctrl.spiceForm.inputServings.$pristine }\"><label><span class=\"glyphicon glyphicon-cutlery\" aria-hidden=\"true\" style=\"top: 2px\"></span> Servings</label><input name=\"inputServings\" ng-model=\"$ctrl.spice.servings\" class=\"form-control\" type=\"number\" min=\"1\" max=\"99\" ng-maxlength=\"2\"><div ng-show=\"$ctrl.spiceForm.inputServings.$invalid && !$ctrl.spiceForm.inputServings.$pristine\" ng-messages=\"$ctrl.spiceForm.inputServings.$error\" class=\"help-block\" role=\"alert\"><div ng-message=\"required\">Please enter 1-99</div></div></div></div></div><div class=\"form-group\"><label for=\"inputIngredients\">Ingredients</label><textarea ng-model=\"$ctrl.spice.ingredients\" rows=\"4\" class=\"form-control\" id=\"inputIngredients\"></textarea></div><div class=\"form-group\"><label for=\"inputDirections\">Directions</label><textarea ng-model=\"$ctrl.spice.directions\" rows=\"4\" class=\"form-control\" id=\"inputDirections\"></textarea></div><div class=\"form-group\" style=\"margin-bottom:0;padding-bottom:15px\"><label for=\"inputTags\">Tags</label><tags-input ng-model=\"$ctrl.tags\" max-tags=\"20\" add-on-space=\"true\"><auto-complete source=\"$ctrl.getTagList($query)\" min-length=\"2\" max-results-to-show=\"6\"></auto-complete></tags-input></div></div></div><div class=\"row\" ng-show=\"$ctrl.showStatus !== true\"><div class=\"col-xs-12\" style=\"background:#89E894;padding-top: 15px;padding-bottom: 10px\"><button type=\"button\" class=\"btn btn-success pull-right\" ng-click=\"$ctrl.add()\" ng-disabled=\"$ctrl.spiceForm.$invalid\"><span class=\"glyphicon glyphicon-send\" aria-hidden=\"true\"></span> Submit</button></div></div><!-- Status View --><div class=\"row\" ng-show=\"$ctrl.showStatus === true\"><div class=\"col-xs-12\" style=\"padding-top: 20px\"><div class=\"alert alert-success\" role=\"alert\" style=\"font-size: 18px;line-height: 34px\"><span class=\"glyphicon glyphicon-ok\" aria-hidden=\"true\" style=\"top: 2px\"></span> Spice submitted successfully!</div></div></div><div class=\"row\" ng-show=\"$ctrl.showStatus === true\"><div class=\"col-xs-12\" style=\"background:#89E894;padding-top: 15px;padding-bottom: 10px\"><button class=\"btn btn-success pull-right\" ng-click=\"$ctrl.ok()\">OK</button></div></div></div></form>");
$templateCache.put("app/components/loginbutton.html","<div ng-hide=\"$ctrl.isLoggedIn()\" class=\"navbar-form navbar-right\"><button class=\"btn btn-success\" ng-click=\"$ctrl.login()\"><span style=\"top: 2px\" class=\"glyphicon glyphicon-user\" aria-hidden=\"true\"></span> Login</button></div><ul ng-show=\"$ctrl.isLoggedIn()\" class=\"nav navbar-nav navbar-right\" style=\"border-left:1px solid #89E894\"><li><a href=\"#\" style=\"padding-top: 10px;padding-bottom: 8px\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"><img style=\"height:32px;margin-right: 10px;border-radius: 50%\" ng-src=\"{{$ctrl.authData.google.profileImageURL}}\">{{ $ctrl.authData.google.displayName }}&nbsp;&nbsp;<span style=\"color:#89E894;top: 2px\" class=\"glyphicon glyphicon-chevron-down\" aria-hidden=\"true\"></span></a><ul class=\"dropdown-menu\"><li><a href=\"#\" ng-click=\"$ctrl.logout()\">Logout</a></li></ul></li></ul>");
$templateCache.put("app/myfeed/myfeed.html","<div class=\"form-group visible-xs-block\" style=\"padding: 10px;margin: 0;background: #5CB85C\"><div class=\"input-group\"><div class=\"input-group-addon\"><span style=\"color:#89E894\" class=\"glyphicon glyphicon-search\" aria-hidden=\"true\"></span></div><input ng-model=\"$root.search\" ng-model-options=\"{ debounce: 250 }\" type=\"text\" class=\"form-control search-input\" placeholder=\"Search\" style=\"-webkit-box-shadow:none;box-shadow:none\"></div></div><sa-spice-card ng-repeat=\"spice in $ctrl.spices | orderBy:\'-timestamp\' | filter: $ctrl.filter\" spice=\"spice\"></sa-spice-card>");
$templateCache.put("app/myfeed/spice.html","<div class=\"container-fluid\" style=\"max-width:1000px;margin-bottom:15px;background:#ccc\"><div class=\"row\" style=\"background:white\"><div class=\"col-sm-6\"><div class=\"row\" ng-show=\"$root.auth.isLoggedIn()\"><div ng-show=\"$ctrl.showConfirm !== true\" class=\"col-xs-12\" style=\"background:#89E894;padding-bottom:10px;padding-top:10px\"><button ng-hide=\"$root.auth.getUser().uid === $ctrl.spice.user.uid\" ng-click=\"$ctrl.togglePin($ctrl.spice)\" class=\"btn btn-success btn-sm\"><span class=\"glyphicon glyphicon-heart\" aria-hidden=\"true\" style=\"top: 2px\" title=\"Pin\\Unpin to My Feed\"></span> {{ ($ctrl.spice.pinnedUsers[$root.auth.getUser().uid] === true) ? \'Unpin\' : \'Pin\' }}</button> <button ng-show=\"$root.auth.getUser().uid === $ctrl.spice.user.uid\" ng-click=\"$ctrl.edit($ctrl.spice)\" class=\"btn btn-success btn-sm\"><span class=\"glyphicon glyphicon-pencil\" aria-hidden=\"true\" style=\"top: 2px\"></span> Edit</button> <button ng-show=\"$root.auth.getUser().uid === $ctrl.spice.user.uid\" ng-click=\"$ctrl.showConfirm = true\" class=\"btn btn-success btn-sm\"><span class=\"glyphicon glyphicon-trash\" aria-hidden=\"true\" style=\"top: 2px\"></span> Delete</button></div><div ng-show=\"$ctrl.showConfirm === true\" class=\"col-xs-12\" style=\"padding: 0\"><div class=\"alert alert-danger clearfix\" style=\"border-radius:0;margin-bottom:0\"><div class=\"pull-left\" style=\"line-height:30px\"><span class=\"glyphicon glyphicon-alert\" aria-hidden=\"true\" style=\"top: 2px\"></span>&nbsp;&nbsp;Are you sure you want to delete this spice?</div><div class=\"pull-right\"><button ng-click=\"$ctrl.showConfirm = false\" class=\"btn btn-default btn-sm\">Cancel</button> <button ng-click=\"$ctrl.delete($ctrl.spice)\" class=\"btn btn-danger btn-sm\">Delete</button></div></div></div></div><h2>{{::$ctrl.spice.name}}</h2><div class=\"clearfix\" style=\"padding-bottom: 10px\"><img ng-src=\"{{::$ctrl.spice.user.profileImageURL}}\" class=\"pull-left\" style=\"margin-right:10px;border-radius: 50%;width:32px\"><div class=\"pull-left\"><a href=\"#\" ng-click=\"$root.search = $ctrl.spice.user.name\"><strong>{{::$ctrl.spice.user.name}}</strong></a><div><small>{{::$ctrl.spice.timestamp | date:\'short\'}}</small></div></div></div><div class=\"row\" style=\"padding-bottom: 10px\"><div class=\"col-xs-4\"><span class=\"glyphicon glyphicon-time\" aria-hidden=\"true\" style=\"top: 2px\"></span> Prep (min)<div style=\"color: #26B937;font-size: 24px\">{{::($ctrl.spice.prepTime) ? $ctrl.spice.prepTime : \'-\'}}</div></div><div class=\"col-xs-4\"><span class=\"glyphicon glyphicon-time\" aria-hidden=\"true\" style=\"top: 2px\"></span> Cook (min)<div style=\"color:#26B937; font-size: 24px\">{{::($ctrl.spice.cookTime) ? $ctrl.spice.cookTime : \'-\'}}</div></div><div class=\"col-xs-4\"><span class=\"glyphicon glyphicon-cutlery\" aria-hidden=\"true\" style=\"top: 2px\"></span> Servings<div style=\"color:#26B937; font-size: 24px\">{{::($ctrl.spice.servings) ? $ctrl.spice.servings : \'-\'}}</div></div></div><div style=\"padding-bottom: 10px\">{{::$ctrl.spice.description}}</div><div ng-show=\"$ctrl.spice.tags\" style=\"padding-bottom: 10px\"><button class=\"btn btn-warning btn-xs\" ng-repeat=\"tag in $ctrl.spice.tags.split(\',\')\" ng-click=\"$root.search = tag\" style=\"margin-right:4px\">{{ ::tag }}</button></div></div><div class=\"col-sm-6\" style=\"padding:0\"><img style=\"width:100%\" ng-src=\"{{::$ctrl.spice.imageURL}}\"></div></div><div class=\"row\"><div class=\"col-sm-6\" style=\"background: #ddd;padding: 15px\"><h3 style=\"border-bottom: 1px solid #ccc;padding-bottom: 10px;margin-top:0px\">Ingredients</h3><div style=\"white-space: pre-wrap\">{{::$ctrl.spice.ingredients}}</div></div><div class=\"col-sm-6\" style=\"background: #eee;padding: 15px\"><h3 style=\"border-bottom: 1px solid #ccc;padding-bottom: 10px;margin-top:0px\">Directions</h3><div style=\"white-space: pre-wrap\">{{::$ctrl.spice.directions}}</div></div></div></div>");}]);